# TerraForger

p5.js を使ったブラウザ向けの2Dサンドボックスゲームです。ブロックを掘って集め、置いて地形を作れます。地形生成には草/土/石の層、木、洞窟、鉱石を含め、昼夜や雲などの背景演出も入れています。

## 遊び方
- 移動: A / D または ← / →
- ジャンプ: W / Space / ↑
- 掘る: 左クリック
- 置く: 右クリック（装備スロットでブロックを選択時）
- 装備スロット切り替え: 1〜5 / マウスホイール
- 装備/所持アイテムの移動: ドラッグ&ドロップ
- 装備を所持品に戻す: 装備スロットを右クリック
- ワールド再生成: R

## 特徴
- 地表の草/土/石の層構造と砂地パッチ
- 洞窟や鉱石（石炭/鉄）のランダム生成
- 木の生成（幹と葉）
- 装備スロットと所持アイテムのドラッグ＆ドロップUI
- 掘削パーティクルとツールの振りアニメーション
- 昼夜サイクルと雲/星の背景演出

## ブロック一覧

| ブロック名 | BlockType | ツルハシで破壊 | 斧で破壊 | 所持品に回収 | 備考 |
|-----------|-----------|--------------|---------|-------------|------|
| 空気 (AIR) | 0 | ❌ | ❌ | ❌ | 透明（描画なし） |
| 土 (DIRT) | 1 | ✅ | ❌ | ✅ | 色描画: 茶色系 `#8B5A2B`（main）、`#6B4423`（dark）、`#A0694F`（light） |
| 草 (GRASS) | 2 | ✅ | ❌ | ❌ | 色描画: 緑色系 `#4A7C23`（main）、`#3A6118`（dark）、`#5C9A2D`（light）+ 上部に明るい緑 `#5DBE2D` |
| 石 (STONE) | 3 | ✅ | ❌ | ✅ | 色描画: 灰色 `#808080`（main）、`#606060`（dark）、`#A0A0A0`（light） |
| 木 (WOOD) | 4 | ❌ | ✅ | ✅ | 色描画: 茶色系 `#B5651D`（main）、`#8B4513`（dark）、`#CD853F`（light） |
| 枝（BRANCH） | 5 | ❌ | ✅ | ✅ | 色描画: 緑色 `#228B22`（main）、`#186A18`（dark）、`#32CD32`（light） |
| 石炭 (COAL) | 6 | ✅ | ❌ | ❌ | 色描画: 暗灰色 `#505050`（main）、`#303030`（dark）、`#6A6A6A`（light）+ 黒い鉱石ドット `#1A1A1A` |
| 鉄 (IRON) | 7 | ✅ | ❌ | ❌ | 色描画: 灰色 `#808080`（main）、`#606060`（dark）、`#A0A0A0`（light）+ ベージュの鉱石ドット `#D4A574` |
| 砂 (SAND) | 8 | ✅ | ❌ | ✅ | 色描画: 黄色 `#F4D03F`（main）、`#D4AC0D`（dark）、`#F7DC6F`（light） |
| 収納箱 (CHEST) | 9 | ❌ | ❌ | ✅ | 画像描画: `placeableSprite` のインデックス4（ハンマーで回収） |
| 作業机 (WORKBENCH) | 10 | ❌ | ❌ | ✅ | 画像描画: `placeableSprite` のインデックス5（ハンマーで回収） |

### 描画方式の説明

- **色描画**: `BlockColors` で定義された色を使用し、main（基本色）、light（ハイライト）、dark（影）で立体感を表現
- **画像描画**: スプライトシート `placeableSprite` から該当するインデックスの画像を切り出して描画
- **鉱石ドット**: COALとIRONは基本の灰色ブロックに、ore色でランダムな位置に小さいドットを描画して鉱石を表現

## セットアップ
1. このフォルダを開き、`index.html` をブラウザで開きます。
2. ローカル環境で動作します（サーバー不要）。

## 動作確認（軽いチェック）
- 起動: `index.html` を開いてキャンバスが表示される
- 背景: 昼夜サイクル・星・雲が動く
- プレイヤー: 左右移動/ジャンプができ、地形で止まる
- カメラ: プレイヤー追従と端での停止が正常
- 採掘: 破壊できるブロックが掘れてドロップが拾える
- 設置: 右クリックでブロック/設置物が置けて所持数が減る
- チェスト: 開閉でき、ドラッグ&ドロップで移動できる
- 装備: 数字キー/ホイールで切り替わり、UIが更新される
- HUD: 座標/リーチ範囲が更新される

## フォルダ構成
- `index.html`: エントリポイント
- `style.css`: 画面レイアウトと見た目
- `js/state.js`: ゲーム状態と定数
- `js/world.js`: 地形生成と地形判定
- `js/player.js`: プレイヤー制御
- `js/background.js`: 背景演出
- `js/particles.js`: パーティクル
- `js/render.js`: 描画
- `js/ui.js`: HUDとインベントリUI
- `js/input.js`: 入力処理
- `js/main.js`: setup/draw のメインループ
